<!DOCTYPE html>
<html lang="ro">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mate pentru Copii</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link rel="manifest" href="manifest.json">
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(() => console.log('Service Worker Registered'))
                .catch(err => console.log('SW Registration Failed', err));
        }
    </script>
</head>

<body>
    <div class="container">
        <!-- Header: Coins & Store & Mute -->
        <div class="header-bar">
            <div id="coin-display">ğŸª™ <span id="coin-count">0</span></div>
            <div class="header-controls">
                <button id="reset-btn" class="icon-btn" title="È˜terge Progresul">ğŸ—‘ï¸</button>
                <button id="mute-btn" class="icon-btn">ğŸ”Š</button>
                <button id="open-store-btn" class="icon-btn">ğŸª Magazin</button>
            </div>
        </div>

        <!-- Ecran de Start -->
        <div id="welcome-screen" class="screen active">
            <div class="start-header">
                <h1>Mate DistractivÄƒ! ğŸˆ</h1>
                <p>Alege jocul:</p>
            </div>

            <div id="mode-selection" class="mode-grid">
                <button onclick="selectMode('math')" class="mode-card">
                    <div class="mode-icon">ğŸ”¢</div>
                    <div class="mode-title">Calcule</div>
                </button>
                <button onclick="selectMode('series')" class="mode-card">
                    <div class="mode-icon">ğŸ“‰</div>
                    <div class="mode-title">È˜iruri</div>
                </button>
                <button onclick="selectMode('neighbors')" class="mode-card">
                    <div class="mode-icon">ğŸ˜ï¸</div>
                    <div class="mode-title">Vecini</div>
                </button>
                <button onclick="selectMode('signs')" class="mode-card">
                    <div class="mode-icon">ğŸ•µï¸</div>
                    <div class="mode-title">Detectiv</div>
                </button>
            </div>

            <div id="level-selection" class="hidden">
                <p>Alege nivelul:</p>
                <button onclick="startGame(1)" class="big-btn level-btn easy">UÈ™or ğŸŸ¢</button>
                <button onclick="startGame(2)" class="big-btn level-btn medium">Mediu ğŸŸ¡</button>
                <button onclick="startGame(3)" class="big-btn level-btn hard">Expert ğŸ”´</button>
                <button onclick="showModes()" class="big-btn"
                    style="background:#7f8c8d; font-size: 1rem; padding: 10px;">â¬… Ãnapoi</button>
            </div>

            <div class="leaderboard-container">
                <h3>ğŸ† Top JucÄƒtori ğŸ†</h3>
                <table id="leaderboard-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Scor</th>
                            <th>Timp</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboard-body">
                        <!-- Rows generated by JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Ecran Magazin -->
        <div id="store-screen" class="screen hidden">
            <h1>Magazinul UrsuleÈ›ului ğŸª</h1>
            <p>Ai: ğŸª™ <span id="store-coin-count">0</span></p>
            <div id="store-grid" class="store-grid">
                <!-- Items generated by JS -->
            </div>
            <button id="close-store-btn" class="big-btn">Ãnapoi ğŸ”™</button>
        </div>

        <!-- Ecran Joc -->
        <div id="game-screen" class="screen hidden">
            <div id="mascot-container">
                <div id="mascot-wrapper">
                    <div id="mascot">ğŸ»</div>
                    <div id="mascot-accessory" class="accessory"></div>
                </div>
                <div id="mascot-message">Salut!</div>
            </div>
            <div class="progress-bar">
                <div id="progress-fill"></div>
            </div>
            <div class="question-container">
                <h2 id="question-text">5 + 1 = ?</h2>
                <div id="visual-aid"></div>
            </div>
            <div id="answers-container" class="answers-grid">
                <!-- Butoanele vor fi generate aici -->
            </div>
            <div id="feedback" class="hidden"></div>
        </div>

        <!-- Ecran Rezultate -->
        <div id="results-screen" class="screen hidden">
            <h1>Bravo! ğŸ‰</h1>

            <div id="result-mascot-container">
                <!-- Cloned mascot appears here -->
            </div>

            <div class="score-card">
                <p>Scor Final:</p>
                <h2 id="final-score">8 / 10</h2>
                <p class="time-stat">Timp: <span id="final-time">00:00</span> â±ï¸</p>
            </div>

            <div id="name-input-container" class="hidden">
                <input type="text" id="player-name" placeholder="Scrie-È›i numele..." maxlength="10">
                <button id="save-score-btn" class="big-btn" style="padding: 10px 20px; font-size: 1rem;">SalveazÄƒ
                    ğŸ’¾</button>
            </div>

            <div id="report-container" class="report-list">
                <!-- Raportul va fi generat aici -->
            </div>
            <button id="restart-btn" class="big-btn">JoacÄƒ din nou ğŸ”„</button>
        </div>
    </div>
    <script src="script.js"></script>
</body>

</html>